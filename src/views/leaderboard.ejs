<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

             
              <div class="d-flex bg-info mb-5 sticky-top" id="sidebar">
                <div class="p-2 sticky-top" id="left_side_content" style="overflow: scroll;">
                  <a href="./gameplay"><h5> <u>Categories</u> </h5> </a>
                  <br>
                  
                  <% if(categories_list){
                    categories_list.forEach(function(cat){ %>
                      <li><%= cat %></li>
                    <% });
                  } %>
                  
                </div>
                     
                
                
                
        <div class="col-lg-8" style="padding-left: 100px; padding-top: 20px;">
        <div class="card shadow-sm" id="profile_general">
          <div class="card-header bg-transparent border-0">
            <h3 class="mb-0"><i class="far fa-clone pr-1"></i>All-Time Triviago Leaderboard</h3>
          </div>
          <div class="card-body pt-0">
            <table class="table table-bordered">
              <tr>
                      <th class="text-center">Rank</th>
                      <th class="text-center">Name</th>
                      <th class="text-center">Score</th>
                      <th class="text-center">Questions Answered</th>
                      <th class="text-center">Questions Correct</th>
                      <th class="text-center">Win Percentage</th>
                    </tr>
                    <%
                     if (data) {
                       var rows = '';
                       var rank = 1;
                       data.forEach(function(item){
                        var accuracy = 0;
                        if(item.games_played != 0){
                          accuracy = ((item.wins / item.games_played) * 100).toFixed(2);
                        }
                         rows += '<tr><td>' + rank +'</td><td>' + item.user_name + '</td><td>' + item.score + '</td><td>' + item.games_played + '</td><td>' + item.wins + '</td><td>' + accuracy + '%</td></tr>';
                         rank++;
                       });
                       %>
                       <%- rows %>
                     <% } %>
            </table>
          </div>
        </div>
          <div style="height: 26px"></div>

      </div>
                
                
                
                
                
                
                <!--right side bar, describing leaderboard-->
 
           
                <div class="ml-auto p-2" id="right_side_content">
                  <a href="./leaderboard"><h5> <u>Leaderboard</u> </h5> </a>
                  <table class="table table-bordered" id="stats_table">
                    <tr>
                      <th class="text-center">Rank</th>
                      <th class="text-center">Name</th>
                      <th class="text-center">Score</th>
                    </tr>
                     <%
                     if (data) {
                       var rows = '';
                       var rank = 1; 
                       data.forEach(function(item){
                         rows += '<tr><td>' + rank +'</td><td>' + item.user_name + '</td><td>' + item.score + '</td></tr>';
                         rank++;
                       });
                       %>
                       <%- rows %>
                     <% } %>
                  </table>
                 
                </div>
              </div>
                     




<%- include('../partials/footer') %>	